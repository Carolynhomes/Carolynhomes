# 12. math库

| 常量     | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| math.e   | 返回欧拉数 (2.7182...)                                       |
| math.inf | 返回正无穷大浮点数                                           |
| math.nan | 返回一个浮点值 NaN (not a number)                            |
| math.pi  | π 一般指圆周率。圆周率 PI (3.1415...)                        |
| math.tau | 数学常数 τ = 6.283185...，精确到可用精度。Tau 是一个圆周常数，等于 2π，圆的周长与半径之比。 |

| 方法                | 描述                                                         |
| ------------------- | ------------------------------------------------------------ |
| math.ceil(x)        | 将 x 向上舍入到最接近的整数                                  |
| math.comb(n, k)     | 返回不重复且无顺序地从 n 项中选择 k 项的方式总数             |
| math.dist(p, q)     | 返回 p 与 q 两点之间的欧几里得距离，以一个坐标序列（或可选代对象）的形式给出。两个点必须具有相同的维度。 |
| math.exp(x)         | 返回 e 的 x 次幂，E^x，其中 e = 2.718281... 是自然对数的基数。 |
| math.fabs(x)        | 返回 x 的绝对值                                              |
| math.factorial(x)   | 返回 x 的阶乘。如果 x 不是整数或为负数时则将引发 ValueError。 |
| math.floor(x)       | 将数字向下舍入到最接近的整数                                 |
| math.fmod(x, y)     | 返回 x/y 的余数                                              |
| math.gcd(*integers) | 返回给定的整数参数的最大公约数                               |
| math.log(x[, base]) | 使用一个参数，返回 x 的自然对数（底为 e）。                  |
| math.pow(x, y)      | 将返回 x 的 y 次幂。                                         |
| math.sqrt(x)        | 返回 x 的平方根                                              |

| 方法            | 描述                                               |
| --------------- | -------------------------------------------------- |
| math.cos(x)     | 返回 x 弧度的余弦值。                              |
| math.sin(x)     | 返回 x 弧度的正弦值。                              |
| math.tan(x)     | 返回 x 弧度的正切值。                              |
| math.acos(x)    | 返回 x 的反余弦，结果范围在 0 到 pi 之间。         |
| math.asin(x)    | 返回 x 的反正弦值，结果范围在 -pi/2 到 pi/2 之间。 |
| math.atan(x)    | 返回 x 的反正切值，结果范围在 -pi/2 到 pi/2 之间。 |
| math.cosh(x)    | 返回 x 的双曲余弦值。                              |
| math.degrees(x) | 将角度 x 从弧度转换为度数。                        |
| math.radians(x) | 将角度 x 从度数转换为弧度。                        |
| math.sinh(x)    | 返回 x 的双曲正弦值。                              |
| math.cosh(x)    | 返回 x 的双曲余弦值。                              |
| math.tanh(x)    | 返回 x 的双曲正切值。                              |

# 13. collections

## Counter 计数器

```python
from collections import Counter

"""a demo
a = ["apple", "banana", "apple", "cat", "cat", "cat", "dog"]
b = Counter(a)

print(b)  # Counter({'cat': 3, 'apple': 2, 'banana': 1, 'dog': 1})
"""



"""定义方式
a = Counter()  # 空Counter
a = Counter("hello world")  # 统计每个字符出现次数
a = Counter([1, 2, 3, 1, 2])  # 统计每个元素出现次数

# 利用字典初始化每个key及其出现次数
a = Counter({"a":1, "b":2, "c":3})
a = Counter(a=1, b=2, c=3)
"""

a = Counter("helloworld")
print(a)  # Counter({'l': 3, 'o': 2, 'h': 1, 'e': 1, 'w': 1, 'r': 1, 'd': 1})

print("*" * 20)

# 出现频率最高的k个
print(a.most_common(2))  # [('l', 3), ('o', 2)]  

print("*" * 20)

# 返回一个迭代器，每个元素重复对应次数
print(a.elements())  # <itertools.chain object at 0x0000019F8BEAB0D0>
print(list(a.elements()))  # ['h', 'e', 'l', 'l', 'l', 'o', 'o', 'w', 'r', 'd']

print("*" * 20)

print(a.keys())  

print("*" * 20)

print(a.values())

print("*" * 20)
a.clear()
print(a)

print("*" * 20)

c = Counter(a=3, b=1)
d = Counter(a=2, b=2)
print("c+d=", c+d)
# c+d= Counter({'a': 5, 'b': 3})

print("*" * 20)
print("c-d=", c-d)
# c-d= Counter({'a': 1})

print("*" * 20)
print("c&d=", c&d)
# c&d= Counter({'a': 2, 'b': 1})

print("*" * 20)
print("c|d=", c&d)
# c|d= Counter({'a': 2, 'b': 1})

```

## deque 双端队列

```python
# 大部分与list类似，但是删除和插入操作比list高效
from collections import deque

'''
a = deque([1, 2, 3, 4])
a.append(5)
a.appendleft(10)
print(a)

a.popleft()  # 左边弹出
# b = a.popleft() 
print(a)

a.pop()  # 右边弹出
print(a)

a.extend([2, 3, 4]) 
print(a)

a.remove(2)  # 去掉第一个碰到的2
print(a) 
'''

a = deque([1, 2, 3, 4, 1, 4, 2, 4])
print(a)
a.reverse()  # 反转
print(a)

print("4出现的次数: ", a.count(4))

a.rotate(3)  # 向右循环移动3步，如果是负数，就向左循环
print("a = ", a)

print("4所在的下标 = ", a.index(4))

```



## defaultdict 有默认值的字典

```python
# 字典中获取key方法：
    # - 通过get
    # - 通过[]获取
# 使用dict时，如果引用的key不存在，就会抛出keyerror
# 如果希望key不存在时，返回默认值，就可以用这个

from collections import defaultdict

# 不同类型的默认值
d = defaultdict(int)
print(d["x"])

d = defaultdict(list)
print(d["x"])

d = defaultdict(set)
print(d["x"])

d = defaultdict(dict)
print(d["x"])

s = [("yellow", 1), ("blue", 2), ("yellow", 3), ("blue", 4), ("red", 1)]
d = defaultdict(list)
for k, v in s:
    d[k].append(v)

print(d)
# defaultdict(<class 'list'>, {'yellow': [1, 3], 'blue': [2, 4], 'red': [1]})

d = {}
for k, v in s:
    if k not in d.keys():
        d[k] = []
    d[k].append(v)
    # d.setdefault(k, []).append(v)
print(d)
```



## OrderDict 有序字典

```python
from collections import OrderedDict

data = [("a", 1), ("b", 2), ("c", 3)]
d = OrderedDict(data)
# print(d)
# OrderedDict({'a': 1, 'b': 2, 'c': 3})
# while len(d) != 0:
#     print("删除的元素为: ", d.popitem(False))
#     print("d = ", d)

# while len(d) != 0:
#     print("删除的元素为: ", d.popitem())  # 默认从value大的开始删除
#     print("d = ", d)

print(d)
d.move_to_end("a")  # 将a移动到最右端，默认为最右端
print(d)

d.move_to_end("c", False)  # 最左端
print(d)
```

# 14. heapq

```python
# 堆：完全二叉树，每个节点小于等于子节点（默认为最小堆）

import heapq

a = [11, 6, 9, 8, 7, 3]

heapq.heapify(a)  # 将无序的list转为最小堆

print("a = ", a)

heapq.heappush(a, 4)  # 最小堆a中添加元素12
print("a = ", a)

heapq.heappush(a, 12)
print("a = ", a)

while len(a):
    print(heapq.heappop(a), end=' ')
    # 弹出并返回最小元素 heappop()


# heapq.heapreplace(a, x) 弹出并返回最小元素，同时添加元素x


# 未完
# 最小堆插入是咋插入的来着:
"""
插入到最后一个位置：将新元素插入到堆的最后一个位置（即堆的末尾），保持堆的完全二叉树结构。

向上调整（上滤）：
    - 从新插入的节点位置开始，检查它的父节点。
    - 如果新插入的节点的值小于其父节点的值，交换这两个节点的值。
    - 重复这个过程，直到新节点的值不再小于其父节点，或者新节点成为根节点（即位于堆的顶端）。
"""

```

# 15. functool

`functool`模块应用于高阶函数，即`参数或（和）返回值为其他函数的函数`

这里只学 `partial`：**“冻结”某些函数的参数或者关键字参数，然后返回一个函数**

```python
from functools import partial

def add(a, b, c):
    print("a = ", a)
    print("b = ", b)
    print("c = ", c)
    print("a + b + c = ", a + b + c)

add(1, 2, 3)

add_fix_c = partial(add, c=10)
add_fix_c(1, 2)

add_fix_a = partial(add, 5)
add_fix_a(2, 4)

```

# 16. itertools

创建迭代器的模块

- 无限迭代器
- 有限迭代器
- 排列组合迭代器

无限迭代器

![无限迭代器](http://cdn.jsdelivr.net/gh/Carolynhomes/images@main/img/study/vue_springboot202411132107915.png)

有限迭代器

![有限迭代器](http://cdn.jsdelivr.net/gh/Carolynhomes/images@main/img/study/vue_springboot202411132108188.png)

排列组合迭代器

![排列组合迭代器](http://cdn.jsdelivr.net/gh/Carolynhomes/images@main/img/study/vue_springboot202411132108940.png)![排列组合迭代器](http://cdn.jsdelivr.net/gh/Carolynhomes/images@main/img/study/vue_springboot202411132109091.png)

